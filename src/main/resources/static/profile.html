<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Profil</title>
</head>
<style>
    body{
        background-color: #607B8B;
        padding: 20px;
    }
    .content-container {
        display: flex;
        justify-content: space-between;
        gap: 20px;
    }
    .main-content{
        flex: 1;
    }
    .all-tasks-sidebar{
        flex: 0 0 400px;
        border: 1px solid black;
        padding: 15px;
        background-color: #CD6090;
        border-radius: 8px;
        box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        max-height: 800px;
        overflow-y: auto;
    }

    .navigation a {
        text-decoration: none;
        color: black;
        margin-right: 15px;
        padding: 5px 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        background-color: white;
    }
    h3 {
        color: #D1EEEE;
    }
    ul {
        list-style-type: none;
        padding: 0;
    }
    li {
        margin-bottom: 8px;
        padding: 10px;
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 5px;
    }

    #email {
        margin-bottom: 20px;
    }
    .welcome-header {
        margin-bottom: 5px;
    }
</style>
<body>
<h2 class="welcome-header">V√≠tejte!</h2>
<p id="email"></p>

<div class="content-container">
    <div class="main-content">
        <h3>√ökoly splnƒõn√© dnes:</h3>
        <ul id="done-tasks"></ul>
    </div>

    <div class="all-tasks-sidebar">
        <h3>V≈°echny dokonƒçen√© √∫koly</h3>
        <ul id="all-user-tasks-list"></ul>
    </div>
</div>

<div class="navigation">
    <a href="/dashboard.html">‚¨Ö Zpƒõt na √∫koly</a>
    <a href="/all-profiles.html">üë• V≈°echny profily</a>
</div>

<script>
    fetch('/api/login', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: new URLSearchParams({
            username: 'anee.tomeckova@gmail.com',
            password: 'anee10'
        })
    })
        .then(() => {
            fetch('/api/email')
                .then(res => res.text())
                .then(email => {
                    document.getElementById('email').textContent = "Email: " + email;
                })
                .catch(err => {
                    console.error("Chyba p≈ôi naƒç√≠t√°n√≠ emailu:", err);
                    document.getElementById('email').textContent = "Nepoda≈ôilo se naƒç√≠st email";
                });

            fetch('/api/profile')
                .then(res => res.json())
                .then(tasks => {
                    const ul = document.getElementById('done-tasks');
                    if (tasks.length === 0) {
                        ul.innerHTML = '<p>Dnes zat√≠m ≈æ√°dn√© √∫koly.</p>';
                    } else {
                        tasks.forEach(t => {
                            const li = document.createElement('li');
                            li.textContent = t;
                            ul.appendChild(li);
                        });
                    }
                })
                .catch(err => {
                    console.error("Chyba p≈ôi naƒç√≠t√°n√≠ dne≈°n√≠ch √∫kol≈Ø:", err);
                    document.getElementById('done-tasks').innerHTML = '<p style="color: red;">Nepoda≈ôilo se naƒç√≠st √∫koly.</p>';
                });

            fetch('/api/profile/all-tasks')
                .then(res => res.json())
                .then(allTasks => {
                    const list = document.getElementById('all-user-tasks-list');
                    list.innerHTML = '';
                    if (allTasks.length === 0) {
                        list.innerHTML = '<p>Zat√≠m ≈æ√°dn√© splnƒõn√© √∫koly.</p>';
                    } else {
                        allTasks.forEach(task => {
                            const li = document.createElement('li');
                            li.textContent = task;
                            list.appendChild(li);
                        });
                    }
                })
                .catch(err => {
                    console.error("Chyba p≈ôi naƒç√≠t√°n√≠ v≈°ech √∫kol≈Ø:", err);
                    document.getElementById('all-user-tasks-list').innerHTML = '<p style="color: red;">Nepoda≈ôilo se naƒç√≠st v≈°echny √∫koly.</p>';
                });
        })
        .catch(err => {
            console.error("Chyba p≈ôi loginu:", err);
            alert("Nepoda≈ôilo se p≈ôihl√°sit.");
        });
</script>
</body>
</html>

